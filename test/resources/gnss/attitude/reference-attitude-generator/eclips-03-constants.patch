--- eclips_Dec2017.f.orig	2018-09-20 14:33:59.644372958 +0200
+++ eclips_Dec2017.f	2018-09-20 14:47:49.208393811 +0200
@@ -102,8 +102,10 @@
 C                                    NaN BEING PRODUCED (Luc Maisonobe)
 C                      May 20, 2018  ENSURE WE USE THE DOUBLE PRECISION VERSION
 C                                    OF ALL MATHEMATICAL FUNCTIONS (Luc Maisonobe)
-C     PARAMETERS        DESCRIPTION
+C                      Jun 08, 2018  ENSURE ALL LITTERAL CONSTANTS ARE DOUBLE
+C                                    PRECISION (Luc Maisonobe)
 C
+C     PARAMETERS        DESCRIPTION
 C        IDIR           DIRECTION OF PROCESSING (1=FORWARD, -1=BACKWARD)
 C        IPRN           SV PRN NUMBER (.LE.32 FOR GPS, .GT.32 FOR GLONASS)
 C        TTAG           OBSERVATION EPOCH TIME TAG (EG SEC OF GPS WEEK)
@@ -411,8 +413,8 @@
           ECLSTM(IPRN,1) = TTAG
        ENDIF
 C DET - APPROX ORBIT ANGLE
-       DET= 180.-ACOS(SVBCOS)/DTR
-       IF(ABS(YANGLE).GT.90.0) DET= 360.0 -DET
+       DET= 180.0D0-ACOS(SVBCOS)/DTR
+       IF(ABS(YANGLE).GT.90.0D0) DET= 360.0D0 -DET
 C May 03, 2017 THE ON LIMIT BETADG <= 4 DEG
 C  MEO YS/ON SWITCHING DELTA BETA LIMIT
        BETAE= .52D0
@@ -420,7 +422,7 @@
        IF(IBLK(IPRN).EQ.22.OR.IBLK(IPRN).EQ.26) BETAE= .97D0
 C COMPUTE THE ACTUAL BETAE (HERE BETA INCREASE PER 1 REVOLUTION)
        IF((TTAG-ECLSTM(IPRN,1)).NE.0.D0)
-     & BETAE= (BETADG-BETAINI(IPRN))/(TTAG-ECLSTM(IPRN,1))*360./MURATE
+     & BETAE= (BETADG-BETAINI(IPRN))/(TTAG-ECLSTM(IPRN,1))*360.D0/MURATE
        BETAE = ABS(BETAE)
 C ON SWITCH FOR SURE FOR GEO (23/27) OR BETAE LIMIT
        IF(IBLK(IPRN).EQ.23.OR.IBLK(IPRN).EQ.27.OR.ABS(BETADG).LE.(4.1D0-
@@ -429,10 +431,10 @@
        IF(ABS(BETADG).GT.(3.9D0+BETAE)) GO TO 3
        IF(BETAINI(IPRN).NE.0.D0) THEN
 C KEEP YS
-        IF(ABS(BETADG).LT.ABS(BETAINI(IPRN)).AND.ABS(BETADG).GE.4.1)
+        IF(ABS(BETADG).LT.ABS(BETAINI(IPRN)).AND.ABS(BETADG).GE.4.1D0)
      &   GO TO 3
 C KEEP ON
-        IF(ABS(BETADG).GT.ABS(BETAINI(IPRN)).AND.ABS(BETADG).LE.3.9)
+        IF(ABS(BETADG).GT.ABS(BETAINI(IPRN)).AND.ABS(BETADG).LE.3.9D0)
      &   GO TO 2
         IF(IDIR.GT.0) THEN
 C     FORWARD RUN
@@ -440,18 +442,22 @@
 C ON WHEN ORBIT ANGLE DET IS/WAS  90  DEG                      
          IF(ABS(BETADG).LT.ABS(BETAINI(IPRN))) THEN
 C SHOULD BE ALREADY ON MODE ?
-          IF(DET.LE.90.0.AND.(ABS(BETADG)+BETAE*(DET+270.)/360.).LE.4.1)
+          IF(DET.LE.90.0D0.AND.
+     &       (ABS(BETADG)+BETAE*(DET+270.0D0)/360.0D0).LE.4.1D0)
      &    GO TO 2
-          IF(DET.GT.90.0.AND.(ABS(BETADG)+BETAE*(DET-90.)/360.).LE.4.1)
+          IF(DET.GT.90.0D0.AND.
+     &       (ABS(BETADG)+BETAE*(DET-90.0D0)/360.0D0).LE.4.1D0)
      &    GO TO 2
 C YS SWITCH CHECK
 C YS WHEN ORBIT ANGLE DET IS/WAS  90  DEG                      
          ENDIF
          IF(ABS(BETADG).GT.ABS(BETAINI(IPRN))) THEN
 C SHOULD BE ALREADY ON MODE ?
-          IF(DET.LE.90.0.AND.(ABS(BETADG)-BETAE*(DET+270.)/360.).LE.3.9)
+          IF(DET.LE.90.0D0.AND.
+     &       (ABS(BETADG)-BETAE*(DET+270.0D0)/360.D0).LE.3.9D0)
      &    GO TO 2
-          IF(DET.GT.90.0.AND.(ABS(BETADG)-BETAE*(DET-90.)/360.).LE.3.9)
+          IF(DET.GT.90.0D0.AND.
+     &       (ABS(BETADG)-BETAE*(DET-90.0D0)/360.0D0).LE.3.9D0)
      &    GO TO 2
          ENDIF
         ENDIF
@@ -460,9 +466,11 @@
 C ON SWITCH ON CHECK
          IF(ABS(BETADG).LT.ABS(BETAINI(IPRN))) THEN
 C SHOULD BE ALREADY ON MODE ?
-          IF(DET.LE.90.0.AND.(ABS(BETADG)+BETAE*(DET+270.)/360.).LE.4.1)
+          IF(DET.LE.90.0D0.AND.
+     &       (ABS(BETADG)+BETAE*(DET+270.0D0)/360.0D0).LE.4.1D0)
      &    GO TO 2
-          IF(DET.GT.90.0.AND.(ABS(BETADG)+BETAE*(DET-90.)/360.).LE.4.1)
+          IF(DET.GT.90.0D0.AND.
+     &       (ABS(BETADG)+BETAE*(DET-90.0D0)/360.0D0).LE.4.1D0)
      &    GO TO 2
 C YS SWITCH OFF CHECK
          ENDIF
@@ -470,9 +478,11 @@
           IF(ABS(BETADG).GT.3.9D0) THEN
 C YS SWITCH?  
 C KEEP ON SINCE DET 90 DEG WAS BEFORE 3.9 DEG BETA?
-           IF(DET.LE.90.0.AND.(ABS(BETADG)-BETAE*(DET+270.)/360.).LE.3.9
-     &     )GO TO 2
-           IF(DET.GT.90.0.AND.(ABS(BETADG)-BETAE*(DET-90.)/360.).LE.3.9)
+           IF(DET.LE.90.0D0.AND.
+     &        (ABS(BETADG)-BETAE*(DET+270.0D0)/360.0D0).LE.3.9D0)
+     &     GO TO 2
+           IF(DET.GT.90.0D0.AND.
+     &        (ABS(BETADG)-BETAE*(DET-90.0D0)/360.0D0).LE.3.9D0)
      &     GO TO 2
           ENDIF
          ENDIF
@@ -526,7 +536,7 @@
 C Jan 16, 2015- end
        END IF 
        IF(NOON) THEN
-       DET=SQRT(MAX(0.0D0,(acos(svbcos)*180./pi)**2-BETADG**2))
+       DET=SQRT(MAX(0.0D0,(acos(svbcos)*180.0D0/pi)**2-BETADG**2))
 C Jan 16, 2015- start (NO IIR X-REVERSAL!)
 c        IF(IBLK(IPRN).EQ.4.OR.IBLK(IPRN).EQ.5) THEN
 c         IF(DABS(YANGLE).LT.90.d0) DET=-DET
@@ -628,7 +638,7 @@
               ECLSTM(IPRN,NECLIPS(IPRN))= ECLSTM(IPRN,NECLIPS(IPRN))-
      &         ABS(BETADG)*sqrt(ANOON/ABS(BETADG)-1.d0)/MURATE
               ECLETM(IPRN,NECLIPS(IPRN))= ECLSTM(IPRN,NECLIPS(IPRN))+
-     &         2*ABS(BETADG)*sqrt(ANOON/ABS(BETADG)-1.d0)/MURATE
+     &         2.D0*ABS(BETADG)*sqrt(ANOON/ABS(BETADG)-1.d0)/MURATE
 C May 03, 2017 -remove Jan 10 dead code below
 C Jan 10, 2017 - GALILEO NOON - start
 C             IF(IPRN .GT.64.AND.IPRN.LE.100)THEN
@@ -793,14 +803,14 @@
      &         SIN((ttag-(ECLSTM(IPRN,I)+ECLETM(IPRN,I))/2)*MURATE*DTR)
 C Jan 10, 2017 - start
 C GAL ECLIPS MODEL: Shy => BETAE
-               BETAE=0.5*(-SIGN(SIN(BETA0*DTR),BETADG)-SIN(BETADG*DTR))
+             BETAE=0.5D0*(-SIGN(SIN(BETA0*DTR),BETADG)-SIN(BETADG*DTR))
      &         +0.5D0*(-SIGN(SIN(BETA0*DTR),BETADG)+SIN(BETADG*DTR))*
      &         COS(PI*ABS(YAWEND*COS(BETADG*DTR))/SIN(ANOON*DTR))
                  IF(ABS(BETADG).LT.0.07D0) THEN
 C USE BETAINI IF NOT ZERO, SINCE BETA SIGN CHANGE IS POSSIBLE DURING THE
 C MODEL TURN
                   IF(BETAINI(IPRN).NE.0.D0)
-     &BETAE=0.5*(-SIGN(SIN(BETA0*DTR),BETAINI(IPRN))-SIN(BETADG*DTR))
+     &BETAE=0.5D0*(-SIGN(SIN(BETA0*DTR),BETAINI(IPRN))-SIN(BETADG*DTR))
      &+0.5D0*(-SIGN(SIN(BETA0*DTR),BETAINI(IPRN))+SIN(BETADG*DTR))*
      &         COS(PI*ABS(YAWEND*COS(BETADG*DTR))/SIN(ANOON*DTR))
                  ENDIF
@@ -875,14 +885,14 @@
      &         PI +(TTAG-(ECLSTM(IPRN,I)+ECLETM(IPRN,I))/2)*MURATE*DTR)
 C Jan 10, 2017
 C GAL ECLIPS MODEL: Shy => BETAE
-               BETAE=0.5*(-SIGN(SIN(BETA0*DTR),BETADG)-SIN(BETADG*DTR))
+             BETAE=0.5D0*(-SIGN(SIN(BETA0*DTR),BETADG)-SIN(BETADG*DTR))
      &         +0.5D0*(-SIGN(SIN(BETA0*DTR),BETADG)+SIN(BETADG*DTR))*
      &         COS(PI*ABS(YAWEND*COS(BETADG*DTR))/SIN(ANOON*DTR))
                  IF(ABS(BETADG).LT.0.07D0) THEN
 C USE BETAINI IF NOT ZERO, SINCE BETA SIGN CHANGE IS POSSIBLE DURING THE
 C MODEL TURN
                   IF(BETAINI(IPRN).NE.0.D0)
-     &BETAE=0.5*(-SIGN(SIN(BETA0*DTR),BETAINI(IPRN))-SIN(BETADG*DTR))
+     &BETAE=0.5D0*(-SIGN(SIN(BETA0*DTR),BETAINI(IPRN))-SIN(BETADG*DTR))
      &+0.5D0*(-SIGN(SIN(BETA0*DTR),BETAINI(IPRN))+SIN(BETADG*DTR))*
      &         COS(PI*ABS(YAWEND*COS(BETADG*DTR))/SIN(ANOON*DTR))
                  ENDIF
